<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CON Hall Booking System</title>
    <link rel="icon" href="https://concihsr.in/wp-content/uploads/2024/10/CON-logo-small.png" />
    <style>
        :root {
            --primary: #003366;
            --accent: #0055aa;
            --card: #ffffff;
            --muted: #777;
            --bg: #f4f6f8;
            --success: #28a745;
            --error: #dc3545;
        }
        body { font-family: Arial, sans-serif; margin: 0; background: var(--bg); color: #222; }
        header { background: var(--primary); color: white; padding: 18px 10px; display: flex; justify-content: center; align-items: center; }
        header h1 { margin: 0; font-size: 22px; text-align: center; }
        .container { max-width: 1100px; margin: 20px auto; padding: 10px; }
        .nav-links { text-align: center; margin-bottom: 16px; }
        .nav-links a { color: var(--primary); margin: 0 8px; text-decoration: none; padding: 8px 12px; background: #fff; border-radius: 6px; transition: all 0.3s ease; }
        .nav-links a:hover, .nav-links a.active { background: var(--primary); color: white; }
        .content { display: none; background: var(--card); padding: 20px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
        .content.active { display: block; }
        .form-container { max-width: 900px; margin: auto; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .form-group { margin-bottom: 12px; }
        label { display: block; font-weight: 600; margin-bottom: 6px; }
        input[type="text"], input[type="date"], input[type="time"], input[type="number"], textarea, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { background: var(--primary); color: white; border: none; padding: 10px 14px; border-radius: 8px; cursor: pointer; transition: background 0.3s ease; }
        button:hover { background: var(--accent); }
        button.secondary { background: #666; }
        button.success { background: var(--success); }
        button.error { background: var(--error); }
        .rooms-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 10px; }
        .room-card { background: #fff; border: 1px solid #e6e6e6; padding: 10px; border-radius: 8px; display: flex; align-items: center; gap: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.03); transition: all 0.2s ease; }
        .room-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .room-card input { width: 18px; height: 18px; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000; }
        .modal .modal-content { background: #fff; padding: 24px; border-radius: 8px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .admin-login { max-width: 420px; margin: auto; }
        .logo { background: #fff; display: flex; justify-content: center; padding: 12px; border-radius: 8px; margin-bottom: 12px; }
        table { width: 100%; border-collapse: collapse; margin-top: 12px; }
        th, td { border: 1px solid #eee; padding: 10px; text-align: left; }
        th { background: var(--primary); color: white; }
        .stats { display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; }
        .stat-card { background: #fff; padding: 12px 16px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); flex: 1; min-width: 120px; text-align: center; }
        .stat-card h3 { margin: 0; font-size: 24px; color: var(--primary); }
        .stat-card p { margin: 4px 0 0; color: var(--muted); }
        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: white; animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .error-message { color: var(--error); font-size: 14px; margin-top: 4px; display: none; }
        .success-message { color: var(--success); font-size: 14px; margin-top: 4px; display: none; }
        .filter-controls { display: flex; gap: 10px; margin-bottom: 16px; flex-wrap: wrap; }
        .filter-controls select, .filter-controls input { flex: 1; min-width: 150px; }
        .status-badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-approved { background: #d4edda; color: #155724; }
        .status-rejected { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
<header><h1>CON Hall Booking</h1></header>
<div class="container">
    <div class="nav-links">
        <a href="#" class="nav-link active" data-target="booking">Book Room</a>
        <a href="#" class="nav-link" data-target="events">View Events</a>
        <a href="#" class="nav-link" data-target="admin-login">Admin</a>
        <a href="#" class="nav-link" data-target="admin" id="admin-nav" style="display:none;">Dashboard</a>
        <a href="#" class="nav-link" id="logout-btn" style="display:none; background:var(--error); color:white;">Logout</a>
    </div>
    <!-- Booking Section -->
    <div class="content active" id="booking">
        <h2>Book Conference Rooms</h2>
        <div class="form-container">
            <div class="form-group">
                <label>Rooms <span class="error-message" id="roomsError">Select at least one room</span></label>
                <div id="roomsContainer" class="rooms-grid"></div>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label>Event Name <span class="error-message" id="eventNameError">Event name is required</span></label>
                    <input type="text" id="eventName">
                </div>
                <div class="form-group">
                    <label>Department <span class="error-message" id="departmentError">Department is required</span></label>
                    <input type="text" id="department">
                </div>
                <div class="form-group">
                    <label>Start Date <span class="error-message" id="startDateError">Valid start date is required</span></label>
                    <input type="date" id="startDate" min="">
                </div>
                <div class="form-group">
                    <label>End Date <span class="error-message" id="endDateError">Valid end date is required</span></label>
                    <input type="date" id="endDate" min="">
                </div>
                <div class="form-group">
                    <label>Start Time <span class="error-message" id="startTimeError">Start time is required</span></label>
                    <input type="time" id="startTime">
                </div>
                <div class="form-group">
                    <label>End Time <span class="error-message" id="endTimeError">Valid end time is required</span></label>
                    <input type="time" id="endTime">
                </div>
                <div class="form-group">
                    <label>Participants <span class="error-message" id="participantsError">Must have at least 1 participant</span></label>
                    <input type="number" id="participants" value="1" min="1">
                </div>
                <div class="form-group"><label>Notes</label><textarea id="notes"></textarea></div>
            </div>
            <div style="margin-top:12px;">
                <button id="bookingButton">Submit Booking</button>
                <button id="resetButton" class="secondary">Reset Form</button>
                <span class="success-message" id="bookingSuccess">Booking submitted successfully!</span>
            </div>
        </div>
    </div>
    <!-- Events Section -->
    <div class="content" id="events"><h2>Scheduled Events</h2><div class="filter-controls"><select id="roomFilter"><option value="">All Rooms</option></select><input type="date" id="dateFilter"><button id="clearFilters">Clear Filters</button></div><div id="eventsList"></div></div>
    <!-- Admin Login Section -->
    <div class="content" id="admin-login"><div class="admin-login"><div class="logo"><img src="https://concihsr.in/wp-content/uploads/2024/10/CON-logo-small.png" alt="logo" style="height:48px;"></div><h3 style="text-align:center;margin-top:0;">Admin Login</h3><div class="form-container"><div class="form-group"><label>Username</label><input type="text" id="adminUsername"></div><div class="form-group"><label>Password</label><input type="password" id="adminPassword"></div><div style="text-align:center;margin-top:8px;"><button id="adminLoginButton">Login</button><div class="loading" id="loginLoading" style="display:none;"></div></div><div id="adminLoginError" class="error-message">Invalid login credentials</div></div></div></div>
    <!-- Admin Dashboard Section -->
    <div class="content" id="admin"><h2>Admin Dashboard</h2><div class="stats"><div class="stat-card"><h3 id="pendingCount">0</h3><p>Pending Requests</p></div><div class="stat-card"><h3 id="approvedCount">0</h3><p>Approved Bookings</p></div><div class="stat-card"><h3 id="totalRooms">0</h3><p>Available Rooms</p></div></div><h3>Add New Room</h3><div class="form-container"><div class="form-group"><input type="text" id="newRoomName" placeholder="Room name"><span class="error-message" id="roomNameError">Room name is required</span></div><div><button id="addRoomButton">Add Room</button><span class="success-message" id="roomSuccess">Room added successfully!</span></div></div><h3>Pending Approval</h3><div class="table-responsive"><table><thead><tr><th>Event</th><th>Rooms</th><th>Dates</th><th>Time</th><th>Participants</th><th>Dept</th><th>Actions</th></tr></thead><tbody id="pendingRequests"></tbody></table></div><h3>Approved Bookings</h3><div class="filter-controls"><input type="date" id="approvedDateFilter"><button id="clearApprovedFilter">Clear Filter</button></div><div class="table-responsive"><table><thead><tr><th>Event</th><th>Rooms</th><th>Dates</th><th>Time</th><th>Participants</th><th>Dept</th><th>Actions</th></tr></thead><tbody id="approvedBookings"></tbody></table></div></div>
</div>
<!-- Modal -->
<div class="modal" id="messageModal"><div class="modal-content"><h3 id="modalTitle"></h3><div id="modalContent"></div><div style="text-align:right;margin-top:16px;"><button id="modalOkButton">OK</button></div></div></div>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
// Your JavaScript logic (same cleaned one from before) ...
</script>
</body>
</html>